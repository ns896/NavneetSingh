import{_ as e,j as t,F as s,x as n,ax as r,A as i,h as a,n as o,v as l,i as c,m as d,s as h,av as p,I as m,ah as u}from"./icon-333959f6.js";import{A as b}from"./alerts-controller-4d37ec8d.js";import{t as v,b as g,S as f,d as w,bW as C}from"./shell-010f89b8.js";import{r as x,F as y}from"./render-toast-2bb8c38c.js";import{F as T}from"./faceplate-banner-739beda2.js";import{T as _}from"./TinyGesture-6f7cc1aa.js";let k=class extends s{constructor(){super(...arguments),this.isVisible=!1,this.alertMessage="",this.isDevelopment=!1,this.openBanner=e=>{const t=e;this.alert=t.detail;const s="Server error. Try again later.",n=this.alert?.content??this.alert?.message??s,r=`Multiple errors occured, including: ${n}`;this.isVisible?this.alertMessage=this.isDevelopment?r:s:(this.alertMessage=n,this.isVisible=!0)},this.closeBanner=()=>{this.isVisible=!1}}connectedCallback(){super.connectedCallback(),this.addEventListener("show-banner",this.openBanner)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("show-banner",this.openBanner)}render(){return n`${this.isVisible?n`<faceplate-banner \n class="z-[5] pointer-events-auto w-full rounded-none l:rounded-[0.75rem] xl:rounded-[0.75rem] overflow-hidden l:mt-md l:mx-auto l:max-w-[1352px] xl:max-w-[1524px]" \n appearance="error" \n shape="square" \n msg="${this.alertMessage}" \n aria-live="polite" \n dismissible\n><div slot="leadingIcon">${r()}</div>\n <span slot="closeButton">\n ${T.getCloseButton("error",{"aria-label":"close error button",onclick:this.closeBanner})}\n </span>\n </faceplate-banner>`:i}<slot></slot>`}};k.styles=[v],e([t()],k.prototype,"isVisible",void 0),e([t()],k.prototype,"alertMessage",void 0),k=e([a("banner-controller")],k);let B=class extends s{constructor(){super(...arguments),this.ariaLive="polite",this._gesture=new _(this,{mouseSupport:!0}),this.handleToast=e=>{const t=e.detail,s={...t,meta:{...t.meta},namedContent:{...t.namedContent}},{level:n,namedContent:r}=s;r.action??(r.action=g({attributes:{onclick:()=>i.dismiss()},appearance:"plainInverted",leadingIcon:l()}));const i=x(this,s);n&&n>=f.warning&&n<=f.success&&window.setTimeout((()=>{i.dismiss()}),s.meta?.duration??4e3),this.appendChild(i)}}static get styles(){return c`:host{position:fixed}:host>slot{display:flex;flex-direction:column;gap:var(--spacer-md);align-items:center;position:fixed;left:50%;transform:translateX(-50%);padding:0 1rem;bottom:var(--rem16)}`}connectedCallback(){super.connectedCallback(),this.addEventListener("show-toast",this.handleToast),this._gesture.on("swipeleft",this._onSwipe),this._gesture.on("swiperight",this._onSwipe)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("show-toast",this.handleToast),this._gesture.destroy()}_onSwipe(e){if(e instanceof MouseEvent)return;const t=(e.target instanceof HTMLElement?e.target:null)?.closest("faceplate-toast");t instanceof y&&t.dismiss()}render(){return n`<slot></slot>`}};e([o({type:String,reflect:!0,attribute:"aria-live"})],B.prototype,"ariaLive",void 0),B=e([a("toaster-lite")],B);let L=class extends h{constructor(){super(...arguments),this.ariaLive="polite",this.min=f.error,this.max=f.success,this.BATCH_TIMEOUT=100,this._alertsCtrl=new b(this,{batchWindow:this.BATCH_TIMEOUT,onAlert:e=>{const{level:t,namedContent:s={}}=e;if(t===f.error)return s.icon=p({size:m.Large}),this.triggerBanner(e);t===f.warning&&(s.icon=u({size:m.Large})),this.triggerToast(e)}}),this.triggerToast=e=>{this.toaster?.dispatchEvent(w("show-toast",e))},this.triggerBanner=e=>{this.bannerController?.dispatchEvent(w("show-banner",e))}}connectedCallback(){super.connectedCallback(),this._alertsCtrl.options.min=this.min,this._alertsCtrl.options.max=this.max}render(){return n`\n <banner-controller></banner-controller>\n <toaster-lite></toaster-lite>\n `}};L.styles=[c`:host{position:fixed;width:100%}`,v],e([o({type:String,reflect:!0,attribute:"aria-live"})],L.prototype,"ariaLive",void 0),e([o({attribute:"min",converter:C})],L.prototype,"min",void 0),e([o({attribute:"max",converter:C})],L.prototype,"max",void 0),e([d("banner-controller")],L.prototype,"bannerController",void 0),e([d("toaster-lite")],L.prototype,"toaster",void 0),L=e([a("alert-controller")],L);
//# sourceMappingURL=alert-controller-client-js-ed42404d.js.map
